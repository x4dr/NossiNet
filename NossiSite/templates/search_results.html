{% extends "layout.html" %}
{% block title %}
    <title>Wiki-Index</title>
{% endblock %}
{% block pagetitle %}
    <a href="{{ url_for("wiki_index") }}"><h1>Wiki-Index</h1></a>
{% endblock %}
{% block body %}
    <script>
        function searchgo(){
            window.location.href = "{{ url_for("searchwiki",key="") }}" + encodeURIComponent(document.getElementById("searchterm").value);
            return false;
        }
    </script>
    <h1> Entries </h1>
    <input type="search" id="searchterm" class="leet", onsubmit="searchgo()">
    <input type="submit" id="searchbutton" value="search" class="leet" onclick="searchgo()">
    <div><p>This search yielded {{ results | length }} results.</p></div>
    <table><thead>
    <tr>
        <td>Site</td>
        <td>| Match</td>
    </tr>
    </thead>
        <tbody>
        <tr>
            {% for m in results %}
                <td>
                    <a href="{{ url_for("wikipage", page=m[0]) }}"> {{ m[1] or "__" }}</a> </td><td> |
                {{- m[2][:start] }}<a href="{{ url_for("wikipage", page=m[0]) }}">
                    {{- m[2][start:end] }}</a>
                {{- m[2][end:] }}</td></tr>
                <tr>
            {% endfor %}
            </tr>
        </tbody>
    </table>
    <form class="leet" action="{{ url_for("wikipage") }}" method=post>
        <input type="text" name="n" class="leeet">
        <button type="submit" class="leeet">New</button>
    </form>
{% endblock %}
